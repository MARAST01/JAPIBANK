<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="historial.css">
    <title>Transferencia</title>
</head>
<body>
    <!-- Header principal de navegación -->
    <header class="main-header">

        <div class="header-top">
            <h2 class="logo">JapiBank</h2>
            <button class="menu-button">☰</button>
        </div>
        
        <nav class="navegacion">
            <ul>
            <li><a onclick="history.back()"><i class="fa-solid fa-house"></i> Inicio</a></li>
            <li><a href="#"><i class="fa-solid fa-info-circle"></i> Sobre nosotros</a></li>
            <li><a href="perfil.html"><i class="fa-solid fa-user"></i> Perfil</a></li>
            </ul>
        </nav>
        
        <!-- Botones flotantes de accesibilidad -->
        <div class="accesibilidad">
            <button id="aumentar-texto" class="btn-accesibilidad" title="Aumentar tamaño de texto">
                <i class="fa-solid fa-plus"></i>
            </button>
            <button id="disminuir-texto" class="btn-accesibilidad" title="Disminuir tamaño de texto">
                <i class="fa-solid fa-minus"></i>
            </button>
        </div>
        <button id="invertir-colores-btn" class="btn-accesibilidad" title="Invertir colores">
            <i class="fa-solid fa-adjust"></i>
        </button>
    </header>

    <script>
        const menu_button = document.querySelector('.menu-button')
        const navegacion = document.querySelector('.navegacion')
        menu_button.addEventListener('click', () => {
            console.log(navegacion.style.display)
            if (navegacion.style.display != 'block') {
                navegacion.style.display = ('block')
                menu_button.innerHTML = '✖'
            } else {
                navegacion.style.display = 'none'
                menu_button.innerHTML = '☰'
            }
        })
    </script>

    <!-- Contenedor principal -->
  
    <main class="main">
      <div class="container">
        <header class="header">
            <h1>Movimientos</h1>
        </header>
    
        <main class="main-content">
            <section class="movements-table">
               
               
            </section>
            
        </main>
      </div>
    </main>

   <script>
    if( localStorage.getItem('historialEnvia') == '[]' && localStorage.getItem('historialRecibe') == '[]'){
        document.querySelector('.movements-table').innerHTML = '<p>No tienes movimientos</p>'
    }
    else{
        let tabla = "<table>" +
        "<tr>" +
        "<th>Fecha</th>" +
        "<th>Descripción</th>" +
        "<th>Cedula </th>" +
        "<th>Mensaje</th>" +
        "<th>Monto</th>" +
        "</tr>" ;
        

     if(localStorage.getItem('historialEnvia') != '[]'){
        let historialE = JSON.parse(localStorage.getItem('historialEnvia'))
        
        historialE.forEach(historial => {
            tabla += "<tr>" +
                     "<td>" + historial.fechaTransferencia.substring(0, 10) + "</td>" +
                     "<td> Envía </td>" +
                     "<td>" + historial.cedulaReceptor + "</td>" +
                     "<td>" + historial.mensaje + "</td>" +
                     "<td>" + historial.cantidad + "</td>" +
                     "</tr>" ;
        });
        if (localStorage.getItem('historialRecibe') == '[]'){
            tabla += "</table>";
        }
    } 
    if(localStorage.getItem('historialRecibe') != '[]'){
        let historialR = JSON.parse(localStorage.getItem('historialRecibe'))
        
        historialR.forEach(historial => {
            tabla += +"<tr>" +
                     "<td>" + historial.fechaTransferencia.substring(0, 10) + "</td>" +
                     "<td> Recibe </td>" +
                     "<td>" + historial.cedulaEnviador + "</td>" +
                     "<td>" + historial.mensaje + "</td>" +
                     "<td>" + historial.cantidad + "</td>" +
                     "</tr>" + "</table>";
        });
        
    }
    document.querySelector('.movements-table').innerHTML = tabla;
}
 // Variables iniciales
 let textoActual = parseFloat(localStorage.getItem('tamanoTexto')) || 16;
    let esquemaInvertido = localStorage.getItem('esquemaInvertido') === 'true';

    // Aplicar cambios iniciales
    document.documentElement.style.fontSize = `${textoActual}px`;
    if (esquemaInvertido) {
        document.body.classList.add('invertir-colores');
    }

    // Aumentar tamaño de texto
    document.getElementById('aumentar-texto').addEventListener('click', () => {
        textoActual += 2;
        document.documentElement.style.fontSize = `${textoActual}px`;
        localStorage.setItem('tamanoTexto', textoActual);
    });

    // Disminuir tamaño de texto
    document.getElementById('disminuir-texto').addEventListener('click', () => {
        if (textoActual > 12) { // Evitar tamaño muy pequeño
            textoActual -= 2;
            document.documentElement.style.fontSize = `${textoActual}px`;
            localStorage.setItem('tamanoTexto', textoActual);
        }
    });

    // Invertir colores
    document.getElementById('invertir-colores-btn').addEventListener('click', () => {
        document.body.classList.toggle('invertir-colores');
        esquemaInvertido = !esquemaInvertido;
        localStorage.setItem('esquemaInvertido', esquemaInvertido);
    });
   </script> 
</body>
</html>